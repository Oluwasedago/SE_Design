// TypeScript
// File: src/library/devices/substations-protection.ts (continued)
// Continuing from IEEE_C37_2_DEVICE_NUMBERS
// ═══════════════════════════════════════════════════════════════════════════════
import {
  BaseDeviceTemplate,
  DeviceCategory,
  StandardSignalDefinition,
  DeviceAttribute
} from './index';

// ─────────────────────────────────────────────────────────────────────────────
// SECTION 1: ENUMERATIONS
// ─────────────────────────────────────────────────────────────────────────────

export const IEEE_C37_2_DEVICE_NUMBERS = {
  // Commonly Used Protection Functions
  '21': 'Distance Relay',
  '25': 'Synchronizing/Synchrocheck',
  '27': 'Undervoltage Relay',
  '32': 'Directional Power Relay',
  '37': 'Undercurrent/Underpower Relay',
  '40': 'Field (Loss of Excitation) Relay',
  '46': 'Reverse-Phase/Phase-Balance Current Relay',
  '47': 'Phase-Sequence/Phase-Balance Voltage Relay',
  '49': 'Thermal Relay',
  '50': 'Instantaneous Overcurrent Relay',
  '51': 'AC Time Overcurrent Relay',
  '52': 'AC Circuit Breaker',
  '59': 'Overvoltage Relay',
  '60': 'Voltage/Current Balance Relay',
  '63': 'Pressure Relay (Buchholz)',
  '64': 'Ground Detector Relay',
  '67': 'AC Directional Overcurrent Relay',
  '68': 'Blocking Relay',
  '71': 'Oil/Gas Level Relay',
  '78': 'Phase-Angle Measuring/Out-of-Step Relay',
  '79': 'AC Auto-Reclosing Relay',
  '81': 'Frequency Relay',
  '85': 'Carrier/Pilot-Wire Relay',
  '86': 'Lockout Relay',
  '87': 'Differential Relay',
  
  // Suffix Letters
  'G': 'Ground/Generator',
  'N': 'Neutral',
  'T': 'Transformer',
  'L': 'Line',
  'B': 'Bus',
  'F': 'Field',
  'M': 'Motor',
  'R': 'Reactor',
} as const;

// ─────────────────────────────────────────────────────────────────────────────
// ENUMS
// ─────────────────────────────────────────────────────────────────────────────

export enum ProtectionRelayType {
  DISTANCE = 'DISTANCE',
  DIFFERENTIAL = 'DIFFERENTIAL',
  OVERCURRENT = 'OVERCURRENT',
  DIRECTIONAL_OVERCURRENT = 'DIRECTIONAL_OVERCURRENT',
  EARTH_FAULT = 'EARTH_FAULT',
  VOLTAGE = 'VOLTAGE',
  FREQUENCY = 'FREQUENCY',
  MOTOR_PROTECTION = 'MOTOR_PROTECTION',
  GENERATOR_PROTECTION = 'GENERATOR_PROTECTION',
  TRANSFORMER_PROTECTION = 'TRANSFORMER_PROTECTION',
  BUSBAR_PROTECTION = 'BUSBAR_PROTECTION',
  BREAKER_FAILURE = 'BREAKER_FAILURE',
  AUTO_RECLOSER = 'AUTO_RECLOSER',
  SYNCHROCHECK = 'SYNCHROCHECK',
  MULTIFUNCTION = 'MULTIFUNCTION',
}

export enum DistanceZone {
  ZONE_1 = 'ZONE_1',
  ZONE_2 = 'ZONE_2',
  ZONE_3 = 'ZONE_3',
  ZONE_4 = 'ZONE_4',
  ZONE_1B = 'ZONE_1B', // Accelerated Zone 1
  REVERSE = 'REVERSE',
}

export enum CharacteristicType {
  MHO = 'MHO',
  QUADRILATERAL = 'QUADRILATERAL',
  LENTICULAR = 'LENTICULAR',
  POLYGON = 'POLYGON',
  OFFSET_MHO = 'OFFSET_MHO',
}

export enum OCCurveType {
  IEC_STANDARD_INVERSE = 'IEC_STANDARD_INVERSE',
  IEC_VERY_INVERSE = 'IEC_VERY_INVERSE',
  IEC_EXTREMELY_INVERSE = 'IEC_EXTREMELY_INVERSE',
  IEC_LONG_TIME_INVERSE = 'IEC_LONG_TIME_INVERSE',
  IEEE_MODERATELY_INVERSE = 'IEEE_MODERATELY_INVERSE',
  IEEE_VERY_INVERSE = 'IEEE_VERY_INVERSE',
  IEEE_EXTREMELY_INVERSE = 'IEEE_EXTREMELY_INVERSE',
  US_CO8_INVERSE = 'US_CO8_INVERSE',
  UK_RECTIFIER = 'UK_RECTIFIER',
  DEFINITE_TIME = 'DEFINITE_TIME',
}

export enum TeleprotectionScheme {
  POTT = 'POTT', // Permissive Overreach Transfer Trip
  PUTT = 'PUTT', // Permissive Underreach Transfer Trip
  BLOCKING = 'BLOCKING',
  DIRECT_UNDERREACH = 'DIRECT_UNDERREACH',
  DIRECT_OVERREACH = 'DIRECT_OVERREACH',
  DCB = 'DCB', // Directional Comparison Blocking
  DCUB = 'DCUB', // Directional Comparison Unblocking
  LINE_CURRENT_DIFF = 'LINE_CURRENT_DIFF',
}

export enum IEC61850Edition {
  EDITION_1 = 'EDITION_1',
  EDITION_2 = 'EDITION_2',
  EDITION_2_1 = 'EDITION_2_1',
}

export enum CommunicationProtocol {
  IEC_61850 = 'IEC_61850',
  IEC_60870_5_101 = 'IEC_60870_5_101',
  IEC_60870_5_103 = 'IEC_60870_5_103',
  IEC_60870_5_104 = 'IEC_60870_5_104',
  DNP3 = 'DNP3',
  MODBUS_RTU = 'MODBUS_RTU',
  MODBUS_TCP = 'MODBUS_TCP',
  PROFIBUS = 'PROFIBUS',
}

// ─────────────────────────────────────────────────────────────────────────────
// DISTANCE PROTECTION RELAY (21)
// ─────────────────────────────────────────────────────────────────────────────

export const DISTANCE_RELAY_SIGNALS: StandardSignalDefinition[] = [
  // Zone Status
  {
    nameTemplate: '{TAG}_Z1_PICKUP',
    descriptionTemplate: '{DESC} Zone 1 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Zone Status',
  },
  {
    nameTemplate: '{TAG}_Z1_TRIP',
    descriptionTemplate: '{DESC} Zone 1 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Zone Status',
  },
  {
    nameTemplate: '{TAG}_Z2_PICKUP',
    descriptionTemplate: '{DESC} Zone 2 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Zone Status',
  },
  {
    nameTemplate: '{TAG}_Z2_TRIP',
    descriptionTemplate: '{DESC} Zone 2 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Zone Status',
  },
  {
    nameTemplate: '{TAG}_Z3_PICKUP',
    descriptionTemplate: '{DESC} Zone 3 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Zone Status',
  },
  {
    nameTemplate: '{TAG}_Z3_TRIP',
    descriptionTemplate: '{DESC} Zone 3 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Zone Status',
  },
  {
    nameTemplate: '{TAG}_Z4_PICKUP',
    descriptionTemplate: '{DESC} Zone 4 (Reverse) Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Zone Status',
  },
  
  // Measured Values
  {
    nameTemplate: '{TAG}_FAULT_Z',
    descriptionTemplate: '{DESC} Measured Fault Impedance',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Ω',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_FAULT_R',
    descriptionTemplate: '{DESC} Fault Resistance',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Ω',
    rangeMin: 0,
    rangeMax: 200,
    isMandatory: false,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_FAULT_X',
    descriptionTemplate: '{DESC} Fault Reactance',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Ω',
    rangeMin: -200,
    rangeMax: 500,
    isMandatory: false,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_FAULT_LOC',
    descriptionTemplate: '{DESC} Fault Location',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '%',
    rangeMin: 0,
    rangeMax: 100,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_FAULT_I',
    descriptionTemplate: '{DESC} Fault Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Measurement',
  },
  
  // Teleprotection
  {
    nameTemplate: '{TAG}_CARRIER_TX',
    descriptionTemplate: '{DESC} Carrier/Pilot Signal Transmit',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'Teleprotection',
  },
  {
    nameTemplate: '{TAG}_CARRIER_RX',
    descriptionTemplate: '{DESC} Carrier/Pilot Signal Receive',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Teleprotection',
  },
  {
    nameTemplate: '{TAG}_CARRIER_FAIL',
    descriptionTemplate: '{DESC} Carrier Channel Failure',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Teleprotection',
  },
  
  // Trip & General
  {
    nameTemplate: '{TAG}_TRIP',
    descriptionTemplate: '{DESC} General Trip Output',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_TRIP_A',
    descriptionTemplate: '{DESC} Phase A Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_TRIP_B',
    descriptionTemplate: '{DESC} Phase B Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_TRIP_C',
    descriptionTemplate: '{DESC} Phase C Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_BF_INIT',
    descriptionTemplate: '{DESC} Breaker Failure Initiate',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  
  // Status
  {
    nameTemplate: '{TAG}_IN_SERVICE',
    descriptionTemplate: '{DESC} Protection In Service',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_BLOCKED',
    descriptionTemplate: '{DESC} Protection Blocked',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} Relay Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_SELF_TEST_FAIL',
    descriptionTemplate: '{DESC} Self Test Failure',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Alarm',
  },
  {
    nameTemplate: '{TAG}_VT_FAIL',
    descriptionTemplate: '{DESC} VT Supervision Failure',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Alarm',
  },
];

export const DISTANCE_RELAY_ATTRIBUTES: DeviceAttribute[] = [
  // Zone Settings
  {
    name: 'zone1Reach',
    label: 'Zone 1 Reach',
    dataType: 'NUMBER',
    unit: 'Ω secondary',
    isRequired: true,
    validation: { min: 0.1, max: 100 },
    category: 'Zone 1',
  },
  {
    name: 'zone1Time',
    label: 'Zone 1 Time Delay',
    dataType: 'NUMBER',
    unit: 'ms',
    defaultValue: 0,
    isRequired: true,
    validation: { min: 0, max: 100 },
    category: 'Zone 1',
  },
  {
    name: 'zone1Characteristic',
    label: 'Zone 1 Characteristic',
    dataType: 'ENUM',
    enumValues: Object.values(CharacteristicType),
    defaultValue: CharacteristicType.MHO,
    isRequired: true,
    category: 'Zone 1',
  },
  {
    name: 'zone2Reach',
    label: 'Zone 2 Reach',
    dataType: 'NUMBER',
    unit: 'Ω secondary',
    isRequired: true,
    validation: { min: 0.1, max: 150 },
    category: 'Zone 2',
  },
  {
    name: 'zone2Time',
    label: 'Zone 2 Time Delay',
    dataType: 'NUMBER',
    unit: 'ms',
    defaultValue: 400,
    isRequired: true,
    validation: { min: 100, max: 2000 },
    category: 'Zone 2',
  },
  {
    name: 'zone3Reach',
    label: 'Zone 3 Reach',
    dataType: 'NUMBER',
    unit: 'Ω secondary',
    isRequired: false,
    validation: { min: 0.1, max: 300 },
    category: 'Zone 3',
  },
  {
    name: 'zone3Time',
    label: 'Zone 3 Time Delay',
    dataType: 'NUMBER',
    unit: 'ms',
    defaultValue: 1200,
    isRequired: false,
    validation: { min: 500, max: 5000 },
    category: 'Zone 3',
  },
  
  // Teleprotection
  {
    name: 'teleprotectionScheme',
    label: 'Teleprotection Scheme',
    dataType: 'ENUM',
    enumValues: Object.values(TeleprotectionScheme),
    isRequired: false,
    category: 'Teleprotection',
  },
  {
    name: 'carrierReceiveDelay',
    label: 'Carrier Receive Delay',
    dataType: 'NUMBER',
    unit: 'ms',
    isRequired: false,
    validation: { min: 0, max: 100 },
    category: 'Teleprotection',
  },
  
  // CT/VT Settings
  {
    name: 'ctRatio',
    label: 'CT Ratio',
    dataType: 'STRING',
    isRequired: true,
    category: 'CT/VT',
  },
  {
    name: 'vtRatio',
    label: 'VT Ratio',
    dataType: 'STRING',
    isRequired: true,
    category: 'CT/VT',
  },
  {
    name: 'lineAngle',
    label: 'Line Angle',
    dataType: 'NUMBER',
    unit: '°',
    defaultValue: 85,
    isRequired: true,
    validation: { min: 60, max: 90 },
    category: 'Line Parameters',
  },
  
  // Communication
  {
    name: 'communicationProtocols',
    label: 'Communication Protocols',
    dataType: 'STRING',
    isRequired: false,
    category: 'Communication',
  },
  {
    name: 'iec61850Edition',
    label: 'IEC 61850 Edition',
    dataType: 'ENUM',
    enumValues: Object.values(IEC61850Edition),
    isRequired: false,
    category: 'Communication',
  },
  
  // Device Info
  {
    name: 'manufacturer',
    label: 'Manufacturer',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
  {
    name: 'model',
    label: 'Model',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
  {
    name: 'firmwareVersion',
    label: 'Firmware Version',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
];

export const DISTANCE_RELAY_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-21-001',
  name: 'Distance Protection Relay (21)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['POWER_TRANSMISSION', 'SUBSTATIONS_PROTECTION'],
  description: 'Distance protection relay for transmission line protection. ' +
    'Supports multiple zones, directional elements, and teleprotection schemes.',
  standardSignals: DISTANCE_RELAY_SIGNALS,
  attributes: DISTANCE_RELAY_ATTRIBUTES,
  standards: ['IEC 60255', 'IEEE C37.113', 'IEC 61850'],
  defaultTagPrefix: '21',
  icon: 'distance-relay',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// DIFFERENTIAL PROTECTION RELAY (87)
// ─────────────────────────────────────────────────────────────────────────────

export const DIFFERENTIAL_RELAY_SIGNALS: StandardSignalDefinition[] = [
  // Differential Operation
  {
    nameTemplate: '{TAG}_DIFF_PICKUP',
    descriptionTemplate: '{DESC} Differential Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Differential',
  },
  {
    nameTemplate: '{TAG}_DIFF_TRIP',
    descriptionTemplate: '{DESC} Differential Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Differential',
  },
  {
    nameTemplate: '{TAG}_DIFF_I',
    descriptionTemplate: '{DESC} Differential Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 10000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_BIAS_I',
    descriptionTemplate: '{DESC} Bias (Restraint) Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Measurement',
  },
  
  // REF (Restricted Earth Fault)
  {
    nameTemplate: '{TAG}_REF_PICKUP',
    descriptionTemplate: '{DESC} REF Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'REF',
  },
  {
    nameTemplate: '{TAG}_REF_TRIP',
    descriptionTemplate: '{DESC} REF Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'REF',
  },
  
  // Backup Overcurrent
  {
    nameTemplate: '{TAG}_50_PICKUP',
    descriptionTemplate: '{DESC} Instantaneous OC Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Backup',
  },
  {
    nameTemplate: '{TAG}_51_PICKUP',
    descriptionTemplate: '{DESC} Time OC Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Backup',
  },
  
  // Inrush & Stabilization
  {
    nameTemplate: '{TAG}_INRUSH_BLOCK',
    descriptionTemplate: '{DESC} Inrush Blocking Active',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Stabilization',
  },
  {
    nameTemplate: '{TAG}_OVEREX_BLOCK',
    descriptionTemplate: '{DESC} Overexcitation Blocking Active',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Stabilization',
  },
  {
    nameTemplate: '{TAG}_2ND_HARM',
    descriptionTemplate: '{DESC} 2nd Harmonic Content',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '%',
    rangeMin: 0,
    rangeMax: 100,
    isMandatory: false,
    category: 'Stabilization',
  },
  {
    nameTemplate: '{TAG}_5TH_HARM',
    descriptionTemplate: '{DESC} 5th Harmonic Content',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '%',
    rangeMin: 0,
    rangeMax: 100,
    isMandatory: false,
    category: 'Stabilization',
  },
  
  // Trip Output
  {
    nameTemplate: '{TAG}_TRIP',
    descriptionTemplate: '{DESC} General Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_BF_INIT',
    descriptionTemplate: '{DESC} Breaker Failure Initiate',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  
  // Status & Alarms
  {
    nameTemplate: '{TAG}_IN_SERVICE',
    descriptionTemplate: '{DESC} Protection In Service',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} Relay Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_CT_FAIL',
    descriptionTemplate: '{DESC} CT Circuit Failure',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Alarm',
  },
];

export const DIFFERENTIAL_RELAY_ATTRIBUTES: DeviceAttribute[] = [
  // Differential Settings
  {
    name: 'diffPickup',
    label: 'Differential Pickup (Idiff>)',
    dataType: 'NUMBER',
    unit: 'pu',
    defaultValue: 0.2,
    isRequired: true,
    validation: { min: 0.1, max: 1.0 },
    category: 'Differential',
  },
  {
    name: 'slope1',
    label: 'Slope 1',
    dataType: 'NUMBER',
    unit: '%',
    defaultValue: 25,
    isRequired: true,
    validation: { min: 10, max: 50 },
    category: 'Differential',
  },
  {
    name: 'slope2',
    label: 'Slope 2',
    dataType: 'NUMBER',
    unit: '%',
    defaultValue: 50,
    isRequired: true,
    validation: { min: 30, max: 100 },
    category: 'Differential',
  },
  {
    name: 'slope1Threshold',
    label: 'Slope 1 to 2 Threshold',
    dataType: 'NUMBER',
    unit: 'pu',
    defaultValue: 1.0,
    isRequired: true,
    validation: { min: 0.5, max: 3.0 },
    category: 'Differential',
  },
  {
    name: 'highSetPickup',
    label: 'High Set Pickup (Idiff>>)',
    dataType: 'NUMBER',
    unit: 'pu',
    defaultValue: 8.0,
    isRequired: false,
    validation: { min: 3.0, max: 30.0 },
    category: 'Differential',
  },
  
  // Stabilization
  {
    name: 'secondHarmonicRestraint',
    label: '2nd Harmonic Restraint',
    dataType: 'NUMBER',
    unit: '%',
    defaultValue: 15,
    isRequired: true,
    validation: { min: 5, max: 30 },
    category: 'Stabilization',
  },
  {
    name: 'fifthHarmonicRestraint',
    label: '5th Harmonic Restraint',
    dataType: 'NUMBER',
    unit: '%',
    defaultValue: 25,
    isRequired: false,
    validation: { min: 10, max: 50 },
    category: 'Stabilization',
  },
  {
    name: 'crossBlockingEnabled',
    label: 'Cross Blocking Enabled',
    dataType: 'BOOLEAN',
    defaultValue: true,
    isRequired: true,
    category: 'Stabilization',
  },
  
  // Application
  {
    name: 'applicationType',
    label: 'Application Type',
    dataType: 'ENUM',
    enumValues: ['TRANSFORMER', 'GENERATOR', 'BUS', 'LINE', 'REACTOR', 'MOTOR'],
    isRequired: true,
    category: 'Application',
  },
  {
    name: 'numberOfWindings',
    label: 'Number of Windings/Terminals',
    dataType: 'NUMBER',
    defaultValue: 2,
    isRequired: true,
    validation: { min: 2, max: 5 },
    category: 'Application',
  },
  
  // CT Configuration
  {
    name: 'ctRatioSide1',
    label: 'CT Ratio Side 1',
    dataType: 'STRING',
    isRequired: true,
    category: 'CT Configuration',
  },
  {
    name: 'ctRatioSide2',
    label: 'CT Ratio Side 2',
    dataType: 'STRING',
    isRequired: true,
    category: 'CT Configuration',
  },
  {
    name: 'ctRatioSide3',
    label: 'CT Ratio Side 3 (if applicable)',
    dataType: 'STRING',
    isRequired: false,
    category: 'CT Configuration',
  },
  {
    name: 'vectorCompensation',
    label: 'Vector Group Compensation',
    dataType: 'STRING',
    isRequired: false,
    category: 'CT Configuration',
  },
  
  // Device Info
  {
    name: 'manufacturer',
    label: 'Manufacturer',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
  {
    name: 'model',
    label: 'Model',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
];

export const DIFFERENTIAL_RELAY_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-87-001',
  name: 'Differential Protection Relay (87)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['POWER_TRANSMISSION', 'POWER_GENERATION', 'SUBSTATIONS_PROTECTION'],
  description: 'Percentage differential relay for transformer, generator, bus, or line protection. ' +
    'Includes harmonic restraint and cross-blocking stabilization.',
  standardSignals: DIFFERENTIAL_RELAY_SIGNALS,
  attributes: DIFFERENTIAL_RELAY_ATTRIBUTES,
  standards: ['IEC 60255', 'IEEE C37.91', 'IEC 61850'],
  defaultTagPrefix: '87',
  icon: 'differential-relay',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// OVERCURRENT RELAY (50/51)
// ─────────────────────────────────────────────────────────────────────────────

export const OVERCURRENT_RELAY_SIGNALS: StandardSignalDefinition[] = [
  // Phase Overcurrent
  {
    nameTemplate: '{TAG}_50_PH_PICKUP',
    descriptionTemplate: '{DESC} Phase Instantaneous OC Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Phase OC',
  },
  {
    nameTemplate: '{TAG}_50_PH_TRIP',
    descriptionTemplate: '{DESC} Phase Instantaneous OC Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Phase OC',
  },
  {
    nameTemplate: '{TAG}_51_PH_PICKUP',
    descriptionTemplate: '{DESC} Phase Time OC Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Phase OC',
  },
  {
    nameTemplate: '{TAG}_51_PH_TRIP',
    descriptionTemplate: '{DESC} Phase Time OC Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Phase OC',
  },
  
  // Ground/Earth Fault
  {
    nameTemplate: '{TAG}_50N_PICKUP',
    descriptionTemplate: '{DESC} Ground Instantaneous OC Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Ground OC',
  },
  {
    nameTemplate: '{TAG}_50N_TRIP',
    descriptionTemplate: '{DESC} Ground Instantaneous OC Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Ground OC',
  },
  {
    nameTemplate: '{TAG}_51N_PICKUP',
    descriptionTemplate: '{DESC} Ground Time OC Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Ground OC',
  },
  {
    nameTemplate: '{TAG}_51N_TRIP',
    descriptionTemplate: '{DESC} Ground Time OC Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Ground OC',
  },
  
  // Measured Values
  {
    nameTemplate: '{TAG}_I_A',
    descriptionTemplate: '{DESC} Phase A Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_I_B',
    descriptionTemplate: '{DESC} Phase B Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_I_C',
    descriptionTemplate: '{DESC} Phase C Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_I_N',
    descriptionTemplate: '{DESC} Neutral/Ground Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 20000,
    isMandatory: true,
    category: 'Measurement',
  },
  
  // Outputs
  {
    nameTemplate: '{TAG}_TRIP',
    descriptionTemplate: '{DESC} General Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_ALARM',
    descriptionTemplate: '{DESC} General Alarm',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'Control',
  },
  
  // Status
  {
    nameTemplate: '{TAG}_IN_SERVICE',
    descriptionTemplate: '{DESC} Protection In Service',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} Relay Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
];

export const OVERCURRENT_RELAY_ATTRIBUTES: DeviceAttribute[] = [
  // Phase Overcurrent Settings
  {
    name: 'pickup50Ph',
    label: 'Phase Inst. Pickup (50)',
    dataType: 'NUMBER',
    unit: 'A',
    isRequired: true,
    validation: { min: 0.5, max: 100 },
    category: 'Phase OC',
  },
  {
    name: 'pickup51Ph',
    label: 'Phase Time OC Pickup (51)',
    dataType: 'NUMBER',
    unit: 'A',
    isRequired: true,
    validation: { min: 0.1, max: 20 },
    category: 'Phase OC',
  },
  {
    name: 'curve51Ph',
    label: 'Phase Time OC Curve',
    dataType: 'ENUM',
    enumValues: Object.values(OCCurveType),
    defaultValue: OCCurveType.IEC_STANDARD_INVERSE,
    isRequired: true,
    category: 'Phase OC',
  },
  {
    name: 'tms51Ph',
    label: 'Phase TMS/TD',
    dataType: 'NUMBER',
    defaultValue: 0.5,
    isRequired: true,
    validation: { min: 0.05, max: 1.5 },
    category: 'Phase OC',
  },
  
  // Ground Overcurrent Settings
  {
    name: 'pickup50N',
    label: 'Ground Inst. Pickup (50N)',
    dataType: 'NUMBER',
    unit: 'A',
    isRequired: true,
    validation: { min: 0.1, max: 50 },
    category: 'Ground OC',
  },
  {
    name: 'pickup51N',
    label: 'Ground Time OC Pickup (51N)',
    dataType: 'NUMBER',
    unit: 'A',
    isRequired: true,
    validation: { min: 0.05, max: 10 },
    category: 'Ground OC',
  },
  {
    name: 'curve51N',
    label: 'Ground Time OC Curve',
    dataType: 'ENUM',
    enumValues: Object.values(OCCurveType),
    defaultValue: OCCurveType.IEC_STANDARD_INVERSE,
    isRequired: true,
    category: 'Ground OC',
  },
  {
    name: 'tms51N',
    label: 'Ground TMS/TD',
    dataType: 'NUMBER',
    defaultValue: 0.5,
    isRequired: true,
    validation: { min: 0.05, max: 1.5 },
    category: 'Ground OC',
  },
  
  // CT Settings
  {
    name: 'ctRatio',
    label: 'CT Ratio',
    dataType: 'STRING',
    isRequired: true,
    category: 'CT',
  },
  {
    name: 'ctSecondary',
    label: 'CT Secondary',
    dataType: 'ENUM',
    enumValues: ['1', '5'],
    defaultValue: '1',
    unit: 'A',
    isRequired: true,
    category: 'CT',
  },
  
  // Device
  {
    name: 'manufacturer',
    label: 'Manufacturer',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
  {
    name: 'model',
    label: 'Model',
    dataType: 'STRING',
    isRequired: false,
    category: 'Device',
  },
];

export const OVERCURRENT_RELAY_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-5051-001',
  name: 'Overcurrent Relay (50/51)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['POWER_TRANSMISSION', 'POWER_DISTRIBUTION', 'SUBSTATIONS_PROTECTION'],
  description: 'Non-directional overcurrent relay with instantaneous and time-delayed elements ' +
    'for phase and ground fault protection.',
  standardSignals: OVERCURRENT_RELAY_SIGNALS,
  attributes: OVERCURRENT_RELAY_ATTRIBUTES,
  standards: ['IEC 60255', 'IEEE C37.112', 'IEC 61850'],
  defaultTagPrefix: '50',
  icon: 'overcurrent-relay',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// BAY CONTROLLER / IED
// ─────────────────────────────────────────────────────────────────────────────

export const BAY_CONTROLLER_SIGNALS: StandardSignalDefinition[] = [
  // Breaker Control
  {
    nameTemplate: '{TAG}_CB_CLOSE_CMD',
    descriptionTemplate: '{DESC} CB Close Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'CB Control',
  },
  {
    nameTemplate: '{TAG}_CB_TRIP_CMD',
    descriptionTemplate: '{DESC} CB Trip Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'CB Control',
  },
  {
    nameTemplate: '{TAG}_CB_CLOSED',
    descriptionTemplate: '{DESC} CB Closed Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'CB Control',
  },
  {
    nameTemplate: '{TAG}_CB_OPEN',
    descriptionTemplate: '{DESC} CB Open Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'CB Control',
  },
  
  // Disconnector 1 Control
  {
    nameTemplate: '{TAG}_DS1_CLOSE_CMD',
    descriptionTemplate: '{DESC} DS1 Close Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'DS Control',
  },
  {
    nameTemplate: '{TAG}_DS1_OPEN_CMD',
    descriptionTemplate: '{DESC} DS1 Open Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'DS Control',
  },
  {
    nameTemplate: '{TAG}_DS1_CLOSED',
    descriptionTemplate: '{DESC} DS1 Closed Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'DS Control',
  },
  {
    nameTemplate: '{TAG}_DS1_OPEN',
    descriptionTemplate: '{DESC} DS1 Open Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'DS Control',
  },
  
  // Disconnector 2 Control
  {
    nameTemplate: '{TAG}_DS2_CLOSE_CMD',
    descriptionTemplate: '{DESC} DS2 Close Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'DS Control',
  },
  {
    nameTemplate: '{TAG}_DS2_OPEN_CMD',
    descriptionTemplate: '{DESC} DS2 Open Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'DS Control',
  },
  {
    nameTemplate: '{TAG}_DS2_CLOSED',
    descriptionTemplate: '{DESC} DS2 Closed Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'DS Control',
  },
  {
    nameTemplate: '{TAG}_DS2_OPEN',
    descriptionTemplate: '{DESC} DS2 Open Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'DS Control',
  },
  
  // Earth Switch Control
  {
    nameTemplate: '{TAG}_ES_CLOSE_CMD',
    descriptionTemplate: '{DESC} ES Close Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'ES Control',
  },
  {
    nameTemplate: '{TAG}_ES_OPEN_CMD',
    descriptionTemplate: '{DESC} ES Open Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'ES Control',
  },
  {
    nameTemplate: '{TAG}_ES_CLOSED',
    descriptionTemplate: '{DESC} ES Closed (Earthed)',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'ES Control',
  },
  {
    nameTemplate: '{TAG}_ES_OPEN',
    descriptionTemplate: '{DESC} ES Open',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'ES Control',
  },
  
  // Interlocking
  {
    nameTemplate: '{TAG}_INTLK_OK',
    descriptionTemplate: '{DESC} Interlocking OK',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Interlocking',
  },
  {
    nameTemplate: '{TAG}_INTLK_BYPASS',
    descriptionTemplate: '{DESC} Interlocking Bypassed',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Interlocking',
  },
  
  // Synchrocheck
  {
    nameTemplate: '{TAG}_SYNC_OK',
    descriptionTemplate: '{DESC} Synchrocheck OK',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Synchrocheck',
  },
  {
    nameTemplate: '{TAG}_V_DIFF',
    descriptionTemplate: '{DESC} Voltage Difference',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '%',
    rangeMin: 0,
    rangeMax: 50,
    isMandatory: false,
    category: 'Synchrocheck',
  },
  {
    nameTemplate: '{TAG}_FREQ_DIFF',
    descriptionTemplate: '{DESC} Frequency Difference',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Hz',
    rangeMin: 0,
    rangeMax: 2,
    isMandatory: false,
    category: 'Synchrocheck',
  },
  {
    nameTemplate: '{TAG}_ANGLE_DIFF',
    descriptionTemplate: '{DESC} Angle Difference',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '°',
    rangeMin: 0,
    rangeMax: 90,
    isMandatory: false,
    category: 'Synchrocheck',
  },
  
  // Measurements
  {
    nameTemplate: '{TAG}_V_A',
    descriptionTemplate: '{DESC} Phase A Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'kV',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_V_B',
    descriptionTemplate: '{DESC} Phase B Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'kV',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_V_C',
    descriptionTemplate: '{DESC} Phase C Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'kV',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_I_A',
    descriptionTemplate: '{DESC} Phase A Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 5000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_I_B',
    descriptionTemplate: '{DESC} Phase B Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 5000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_I_C',
    descriptionTemplate: '{DESC} Phase C Current',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 5000,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_MW',
    descriptionTemplate: '{DESC} Active Power',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'MW',
    rangeMin: -500,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_MVAR',
    descriptionTemplate: '{DESC} Reactive Power',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'MVAR',
    rangeMin: -200,
    rangeMax: 200,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_FREQ',
    descriptionTemplate: '{DESC} Frequency',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Hz',
    rangeMin: 45,
    rangeMax: 65,
    isMandatory: true,
    category: 'Measurement',
  },
  
  // Status
  {
    nameTemplate: '{TAG}_LOCAL_REM',
    descriptionTemplate: '{DESC} Local/Remote Mode',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} IED Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_COMM_FAIL',
    descriptionTemplate: '{DESC} Communication Failure',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Alarm',
  },
];

export const BAY_CONTROLLER_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-BCU-001',
  name: 'Bay Controller / Control IED',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['SUBSTATIONS_PROTECTION', 'POWER_TRANSMISSION', 'POWER_DISTRIBUTION'],
  description: 'Bay controller IED for switchgear control, interlocking, synchrocheck, ' +
    'and measurement functions. IEC 61850 compliant.',
  standardSignals: BAY_CONTROLLER_SIGNALS,
  attributes: [
    {
      name: 'bayType',
      label: 'Bay Type',
      dataType: 'ENUM',
      enumValues: ['LINE', 'TRANSFORMER', 'BUS_COUPLER', 'BUS_SECTION', 'CAPACITOR', 'REACTOR'],
      isRequired: true,
      category: 'Configuration',
    },
    {
      name: 'busbarScheme',
      label: 'Busbar Scheme',
      dataType: 'ENUM',
      enumValues: ['SINGLE_BUS', 'MAIN_TRANSFER', 'DOUBLE_BUS', 'ONE_AND_HALF', 'RING'],
      isRequired: true,
      category: 'Configuration',
    },
    {
      name: 'synchrocheck25Enabled',
      label: 'Synchrocheck Enabled',
      dataType: 'BOOLEAN',
      defaultValue: true,
      isRequired: true,
      category: 'Functions',
    },
    {
      name: 'autoRecloser79Enabled',
      label: 'Auto-Recloser Enabled',
      dataType: 'BOOLEAN',
      defaultValue: false,
      isRequired: true,
      category: 'Functions',
    },
    {
      name: 'iec61850Edition',
      label: 'IEC 61850 Edition',
      dataType: 'ENUM',
      enumValues: Object.values(IEC61850Edition),
      isRequired: true,
      category: 'Communication',
    },
    {
      name: 'goosePublishing',
      label: 'GOOSE Publishing',
      dataType: 'BOOLEAN',
      defaultValue: true,
      isRequired: true,
      category: 'Communication',
    },
    {
      name: 'manufacturer',
      label: 'Manufacturer',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
    {
      name: 'model',
      label: 'Model',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
  ],
  standards: ['IEC 61850', 'IEC 60870-5-104', 'IEC 62351'],
  defaultTagPrefix: 'BCU',
  icon: 'bay-controller',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// MERGING UNIT (IEC 61850-9-2)
// ─────────────────────────────────────────────────────────────────────────────

export const MERGING_UNIT_SIGNALS: StandardSignalDefinition[] = [
  // Current Samples
  {
    nameTemplate: '{TAG}_IA_SV',
    descriptionTemplate: '{DESC} Phase A Current (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Current SV',
  },
  {
    nameTemplate: '{TAG}_IB_SV',
    descriptionTemplate: '{DESC} Phase B Current (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Current SV',
  },
  {
    nameTemplate: '{TAG}_IC_SV',
    descriptionTemplate: '{DESC} Phase C Current (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 50000,
    isMandatory: true,
    category: 'Current SV',
  },
  {
    nameTemplate: '{TAG}_IN_SV',
    descriptionTemplate: '{DESC} Neutral Current (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'A',
    rangeMin: 0,
    rangeMax: 20000,
    isMandatory: false,
    category: 'Current SV',
  },
  
  // Voltage Samples
  {
    nameTemplate: '{TAG}_VA_SV',
    descriptionTemplate: '{DESC} Phase A Voltage (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'V',
    rangeMin: 0,
    rangeMax: 200,
    isMandatory: true,
    category: 'Voltage SV',
  },
  {
    nameTemplate: '{TAG}_VB_SV',
    descriptionTemplate: '{DESC} Phase B Voltage (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'V',
    rangeMin: 0,
    rangeMax: 200,
    isMandatory: true,
    category: 'Voltage SV',
  },
  {
    nameTemplate: '{TAG}_VC_SV',
    descriptionTemplate: '{DESC} Phase C Voltage (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'V',
    rangeMin: 0,
    rangeMax: 200,
    isMandatory: true,
    category: 'Voltage SV',
  },
  {
    nameTemplate: '{TAG}_VN_SV',
    descriptionTemplate: '{DESC} Residual Voltage (Sampled Value)',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'V',
    rangeMin: 0,
    rangeMax: 200,
    isMandatory: false,
    category: 'Voltage SV',
  },
  
  // Status
  {
    nameTemplate: '{TAG}_SV_VALID',
    descriptionTemplate: '{DESC} Sampled Values Valid',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_SYNC_OK',
    descriptionTemplate: '{DESC} Time Synchronization OK',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} MU Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_TEST_MODE',
    descriptionTemplate: '{DESC} Test Mode Active',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Status',
  },
];

export const MERGING_UNIT_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-MU-001',
  name: 'Merging Unit (IEC 61850-9-2)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['SUBSTATIONS_PROTECTION'],
  description: 'IEC 61850-9-2 Merging Unit for process bus applications. ' +
    'Converts conventional CT/VT analog signals to sampled values.',
  standardSignals: MERGING_UNIT_SIGNALS,
  attributes: [
    {
      name: 'samplingRate',
      label: 'Sampling Rate',
      dataType: 'ENUM',
      enumValues: ['80_SAMPLES_PER_CYCLE', '256_SAMPLES_PER_CYCLE'],
      defaultValue: '80_SAMPLES_PER_CYCLE',
      isRequired: true,
      category: 'Configuration',
    },
    {
      name: 'ctInputs',
      label: 'Number of CT Inputs',
      dataType: 'NUMBER',
      defaultValue: 4,
      isRequired: true,
      validation: { min: 1, max: 8 },
      category: 'Configuration',
    },
    {
      name: 'vtInputs',
      label: 'Number of VT Inputs',
      dataType: 'NUMBER',
      defaultValue: 4,
      isRequired: true,
      validation: { min: 1, max: 8 },
      category: 'Configuration',
    },
    {
      name: 'timeSyncSource',
      label: 'Time Sync Source',
      dataType: 'ENUM',
      enumValues: ['PTP_IEEE1588', 'IRIG-B', 'PPS', 'INTERNAL'],
      defaultValue: 'PTP_IEEE1588',
      isRequired: true,
      category: 'Time Sync',
    },
    // TypeScript
// File: src/library/devices/substations-protection.ts (continued)
// Completing MERGING_UNIT_TEMPLATE
// ═══════════════════════════════════════════════════════════════════════════════

    {
      name: 'accuracyClass',
      label: 'Accuracy Class',
      dataType: 'ENUM',
      enumValues: ['0.1', '0.2', '0.5', '1.0'],
      defaultValue: '0.2',
      isRequired: true,
      category: 'Performance',
    },
    {
      name: 'svStreamCount',
      label: 'Number of SV Streams',
      dataType: 'NUMBER',
      defaultValue: 1,
      isRequired: true,
      validation: { min: 1, max: 4 },
      category: 'Communication',
    },
    {
      name: 'manufacturer',
      label: 'Manufacturer',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
    {
      name: 'model',
      label: 'Model',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
  ],
  standards: ['IEC 61850-9-2', 'IEC 61869-9', 'IEEE 1588'],
  defaultTagPrefix: 'MU',
  icon: 'merging-unit',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// REMOTE TERMINAL UNIT (RTU)
// ─────────────────────────────────────────────────────────────────────────────

export const RTU_SIGNALS: StandardSignalDefinition[] = [
  // System Status
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} RTU Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_COMM_OK',
    descriptionTemplate: '{DESC} Communication to Master OK',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_BATTERY_LOW',
    descriptionTemplate: '{DESC} Backup Battery Low',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Alarm',
  },
  {
    nameTemplate: '{TAG}_POWER_FAIL',
    descriptionTemplate: '{DESC} Main Power Failure',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Alarm',
  },
  {
    nameTemplate: '{TAG}_TIME_SYNC_OK',
    descriptionTemplate: '{DESC} Time Synchronization OK',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_LOCAL_MODE',
    descriptionTemplate: '{DESC} Local Mode Active',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_EVENT_LOG_FULL',
    descriptionTemplate: '{DESC} Event Log Full',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Alarm',
  },
  
  // I/O Summary (generic - actual I/O defined in modules)
  {
    nameTemplate: '{TAG}_DI_COUNT',
    descriptionTemplate: '{DESC} Digital Inputs Count',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '',
    rangeMin: 0,
    rangeMax: 1000,
    isMandatory: false,
    category: 'I/O Summary',
  },
  {
    nameTemplate: '{TAG}_DO_COUNT',
    descriptionTemplate: '{DESC} Digital Outputs Count',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: false,
    category: 'I/O Summary',
  },
  {
    nameTemplate: '{TAG}_AI_COUNT',
    descriptionTemplate: '{DESC} Analog Inputs Count',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: false,
    category: 'I/O Summary',
  },
  {
    nameTemplate: '{TAG}_ACCUM_COUNT',
    descriptionTemplate: '{DESC} Accumulators Count',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: '',
    rangeMin: 0,
    rangeMax: 100,
    isMandatory: false,
    category: 'I/O Summary',
  },
];

export const RTU_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-RTU-001',
  name: 'Remote Terminal Unit (RTU)',
  category: DeviceCategory.RTU,
  industries: ['SUBSTATIONS_PROTECTION', 'POWER_TRANSMISSION', 'POWER_DISTRIBUTION', 'WATER_WASTEWATER', 'OIL_GAS_MIDSTREAM'],
  description: 'Remote Terminal Unit for SCADA communication. ' +
    'Supports IEC 60870-5-101/104, DNP3, and Modbus protocols.',
  standardSignals: RTU_SIGNALS,
  attributes: [
    {
      name: 'primaryProtocol',
      label: 'Primary Protocol',
      dataType: 'ENUM',
      enumValues: Object.values(CommunicationProtocol),
      defaultValue: CommunicationProtocol.IEC_60870_5_104,
      isRequired: true,
      category: 'Communication',
    },
    {
      name: 'secondaryProtocol',
      label: 'Secondary Protocol',
      dataType: 'ENUM',
      enumValues: [...Object.values(CommunicationProtocol), 'NONE'],
      isRequired: false,
      category: 'Communication',
    },
    {
      name: 'rtuAddress',
      label: 'RTU Address',
      dataType: 'NUMBER',
      isRequired: true,
      validation: { min: 1, max: 65534 },
      category: 'Communication',
    },
    {
      name: 'ipAddress',
      label: 'IP Address',
      dataType: 'STRING',
      isRequired: false,
      category: 'Communication',
    },
    {
      name: 'maxDigitalInputs',
      label: 'Max Digital Inputs',
      dataType: 'NUMBER',
      isRequired: true,
      validation: { min: 8, max: 2000 },
      category: 'I/O Capacity',
    },
    {
      name: 'maxDigitalOutputs',
      label: 'Max Digital Outputs',
      dataType: 'NUMBER',
      isRequired: true,
      validation: { min: 4, max: 500 },
      category: 'I/O Capacity',
    },
    {
      name: 'maxAnalogInputs',
      label: 'Max Analog Inputs',
      dataType: 'NUMBER',
      isRequired: true,
      validation: { min: 4, max: 500 },
      category: 'I/O Capacity',
    },
    {
      name: 'maxAnalogOutputs',
      label: 'Max Analog Outputs',
      dataType: 'NUMBER',
      isRequired: false,
      validation: { min: 0, max: 100 },
      category: 'I/O Capacity',
    },
    {
      name: 'maxAccumulators',
      label: 'Max Accumulators/Counters',
      dataType: 'NUMBER',
      isRequired: false,
      validation: { min: 0, max: 100 },
      category: 'I/O Capacity',
    },
    {
      name: 'eventBufferSize',
      label: 'Event Buffer Size',
      dataType: 'NUMBER',
      unit: 'events',
      isRequired: false,
      validation: { min: 100, max: 100000 },
      category: 'Storage',
    },
    {
      name: 'redundancy',
      label: 'Redundancy Configuration',
      dataType: 'ENUM',
      enumValues: ['NONE', 'HOT_STANDBY', 'WARM_STANDBY', 'DUAL_ACTIVE'],
      defaultValue: 'NONE',
      isRequired: true,
      category: 'Configuration',
    },
    {
      name: 'timeSyncSource',
      label: 'Time Sync Source',
      dataType: 'ENUM',
      enumValues: ['GPS', 'NTP', 'SNTP', 'PTP_IEEE1588', 'IRIG-B', 'PROTOCOL'],
      isRequired: true,
      category: 'Time Sync',
    },
    {
      name: 'manufacturer',
      label: 'Manufacturer',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
    {
      name: 'model',
      label: 'Model',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
  ],
  standards: ['IEC 60870-5-101', 'IEC 60870-5-104', 'IEEE 1815 (DNP3)', 'IEC 62351'],
  defaultTagPrefix: 'RTU',
  icon: 'rtu',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// FREQUENCY RELAY (81)
// ─────────────────────────────────────────────────────────────────────────────

export const FREQUENCY_RELAY_SIGNALS: StandardSignalDefinition[] = [
  // Underfrequency
  {
    nameTemplate: '{TAG}_81U_STG1_PICKUP',
    descriptionTemplate: '{DESC} Underfrequency Stage 1 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Underfrequency',
  },
  {
    nameTemplate: '{TAG}_81U_STG1_TRIP',
    descriptionTemplate: '{DESC} Underfrequency Stage 1 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Underfrequency',
  },
  {
    nameTemplate: '{TAG}_81U_STG2_PICKUP',
    descriptionTemplate: '{DESC} Underfrequency Stage 2 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Underfrequency',
  },
  {
    nameTemplate: '{TAG}_81U_STG2_TRIP',
    descriptionTemplate: '{DESC} Underfrequency Stage 2 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Underfrequency',
  },
  {
    nameTemplate: '{TAG}_81U_STG3_PICKUP',
    descriptionTemplate: '{DESC} Underfrequency Stage 3 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Underfrequency',
  },
  {
    nameTemplate: '{TAG}_81U_STG3_TRIP',
    descriptionTemplate: '{DESC} Underfrequency Stage 3 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Underfrequency',
  },
  
  // Overfrequency
  {
    nameTemplate: '{TAG}_81O_STG1_PICKUP',
    descriptionTemplate: '{DESC} Overfrequency Stage 1 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Overfrequency',
  },
  {
    nameTemplate: '{TAG}_81O_STG1_TRIP',
    descriptionTemplate: '{DESC} Overfrequency Stage 1 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Overfrequency',
  },
  
  // Rate of Change of Frequency (ROCOF)
  {
    nameTemplate: '{TAG}_81R_PICKUP',
    descriptionTemplate: '{DESC} ROCOF Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'ROCOF',
  },
  {
    nameTemplate: '{TAG}_81R_TRIP',
    descriptionTemplate: '{DESC} ROCOF Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'ROCOF',
  },
  
  // Measurements
  {
    nameTemplate: '{TAG}_FREQ',
    descriptionTemplate: '{DESC} Measured Frequency',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Hz',
    rangeMin: 40,
    rangeMax: 70,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_ROCOF',
    descriptionTemplate: '{DESC} Rate of Change of Frequency',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'Hz/s',
    rangeMin: -10,
    rangeMax: 10,
    isMandatory: false,
    category: 'Measurement',
  },
  
  // Output
  {
    nameTemplate: '{TAG}_TRIP',
    descriptionTemplate: '{DESC} General Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  {
    nameTemplate: '{TAG}_LOAD_SHED',
    descriptionTemplate: '{DESC} Load Shed Command',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: false,
    category: 'Control',
  },
  
  // Status
  {
    nameTemplate: '{TAG}_IN_SERVICE',
    descriptionTemplate: '{DESC} Protection In Service',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} Relay Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
];

export const FREQUENCY_RELAY_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-81-001',
  name: 'Frequency Relay (81)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['POWER_GENERATION', 'POWER_TRANSMISSION', 'POWER_DISTRIBUTION', 'SUBSTATIONS_PROTECTION'],
  description: 'Frequency protection relay with underfrequency, overfrequency, and ROCOF functions. ' +
    'Used for load shedding and generator protection.',
  standardSignals: FREQUENCY_RELAY_SIGNALS,
  attributes: [
    {
      name: 'nominalFrequency',
      label: 'Nominal Frequency',
      dataType: 'ENUM',
      enumValues: ['50', '60'],
      defaultValue: '50',
      unit: 'Hz',
      isRequired: true,
      category: 'System',
    },
    // Underfrequency Stage 1
    {
      name: 'uf1Pickup',
      label: 'UF Stage 1 Pickup',
      dataType: 'NUMBER',
      unit: 'Hz',
      defaultValue: 49.0,
      isRequired: true,
      validation: { min: 45, max: 55 },
      category: 'Underfrequency',
    },
    {
      name: 'uf1TimeDelay',
      label: 'UF Stage 1 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.5,
      isRequired: true,
      validation: { min: 0, max: 60 },
      category: 'Underfrequency',
    },
    // Underfrequency Stage 2
    {
      name: 'uf2Pickup',
      label: 'UF Stage 2 Pickup',
      dataType: 'NUMBER',
      unit: 'Hz',
      defaultValue: 48.5,
      isRequired: false,
      validation: { min: 45, max: 55 },
      category: 'Underfrequency',
    },
    {
      name: 'uf2TimeDelay',
      label: 'UF Stage 2 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.3,
      isRequired: false,
      validation: { min: 0, max: 60 },
      category: 'Underfrequency',
    },
    // Underfrequency Stage 3
    {
      name: 'uf3Pickup',
      label: 'UF Stage 3 Pickup',
      dataType: 'NUMBER',
      unit: 'Hz',
      defaultValue: 48.0,
      isRequired: false,
      validation: { min: 45, max: 55 },
      category: 'Underfrequency',
    },
    {
      name: 'uf3TimeDelay',
      label: 'UF Stage 3 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.2,
      isRequired: false,
      validation: { min: 0, max: 60 },
      category: 'Underfrequency',
    },
    // Overfrequency Stage 1
    {
      name: 'of1Pickup',
      label: 'OF Stage 1 Pickup',
      dataType: 'NUMBER',
      unit: 'Hz',
      defaultValue: 51.5,
      isRequired: true,
      validation: { min: 50, max: 65 },
      category: 'Overfrequency',
    },
    {
      name: 'of1TimeDelay',
      label: 'OF Stage 1 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.5,
      isRequired: true,
      validation: { min: 0, max: 60 },
      category: 'Overfrequency',
    },
    // ROCOF
    {
      name: 'rocofPickup',
      label: 'ROCOF Pickup',
      dataType: 'NUMBER',
      unit: 'Hz/s',
      defaultValue: 1.0,
      isRequired: false,
      validation: { min: 0.1, max: 10 },
      category: 'ROCOF',
    },
    {
      name: 'rocofTimeDelay',
      label: 'ROCOF Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.5,
      isRequired: false,
      validation: { min: 0, max: 10 },
      category: 'ROCOF',
    },
    // Device
    {
      name: 'manufacturer',
      label: 'Manufacturer',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
    {
      name: 'model',
      label: 'Model',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
  ],
  standards: ['IEC 60255', 'IEEE C37.106', 'IEC 61850'],
  defaultTagPrefix: '81',
  icon: 'frequency-relay',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// VOLTAGE RELAY (27/59)
// ─────────────────────────────────────────────────────────────────────────────

export const VOLTAGE_RELAY_SIGNALS: StandardSignalDefinition[] = [
  // Undervoltage
  {
    nameTemplate: '{TAG}_27_STG1_PICKUP',
    descriptionTemplate: '{DESC} Undervoltage Stage 1 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Undervoltage',
  },
  {
    nameTemplate: '{TAG}_27_STG1_TRIP',
    descriptionTemplate: '{DESC} Undervoltage Stage 1 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Undervoltage',
  },
  {
    nameTemplate: '{TAG}_27_STG2_PICKUP',
    descriptionTemplate: '{DESC} Undervoltage Stage 2 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Undervoltage',
  },
  {
    nameTemplate: '{TAG}_27_STG2_TRIP',
    descriptionTemplate: '{DESC} Undervoltage Stage 2 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Undervoltage',
  },
  
  // Overvoltage
  {
    nameTemplate: '{TAG}_59_STG1_PICKUP',
    descriptionTemplate: '{DESC} Overvoltage Stage 1 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Overvoltage',
  },
  {
    nameTemplate: '{TAG}_59_STG1_TRIP',
    descriptionTemplate: '{DESC} Overvoltage Stage 1 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Overvoltage',
  },
  {
    nameTemplate: '{TAG}_59_STG2_PICKUP',
    descriptionTemplate: '{DESC} Overvoltage Stage 2 Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Overvoltage',
  },
  {
    nameTemplate: '{TAG}_59_STG2_TRIP',
    descriptionTemplate: '{DESC} Overvoltage Stage 2 Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Overvoltage',
  },
  
  // Neutral Overvoltage (59N)
  {
    nameTemplate: '{TAG}_59N_PICKUP',
    descriptionTemplate: '{DESC} Neutral Overvoltage Pickup',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Neutral OV',
  },
  {
    nameTemplate: '{TAG}_59N_TRIP',
    descriptionTemplate: '{DESC} Neutral Overvoltage Trip',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: false,
    category: 'Neutral OV',
  },
  
  // Measurements
  {
    nameTemplate: '{TAG}_V_A',
    descriptionTemplate: '{DESC} Phase A Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'kV',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_V_B',
    descriptionTemplate: '{DESC} Phase B Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'kV',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_V_C',
    descriptionTemplate: '{DESC} Phase C Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'kV',
    rangeMin: 0,
    rangeMax: 500,
    isMandatory: true,
    category: 'Measurement',
  },
  {
    nameTemplate: '{TAG}_V_N',
    descriptionTemplate: '{DESC} Neutral/Residual Voltage',
    signalType: 'ANALOG_INPUT',
    direction: 'INPUT',
    engineeringUnit: 'V',
    rangeMin: 0,
    rangeMax: 200,
    isMandatory: false,
    category: 'Measurement',
  },
  
  // Output
  {
    nameTemplate: '{TAG}_TRIP',
    descriptionTemplate: '{DESC} General Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Control',
  },
  
  // Status
  {
    nameTemplate: '{TAG}_IN_SERVICE',
    descriptionTemplate: '{DESC} Protection In Service',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_HEALTHY',
    descriptionTemplate: '{DESC} Relay Healthy',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
];

export const VOLTAGE_RELAY_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-2759-001',
  name: 'Voltage Relay (27/59)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['POWER_GENERATION', 'POWER_TRANSMISSION', 'POWER_DISTRIBUTION', 'SUBSTATIONS_PROTECTION'],
  description: 'Combined undervoltage and overvoltage protection relay with multiple stages.',
  standardSignals: VOLTAGE_RELAY_SIGNALS,
  attributes: [
    {
      name: 'nominalVoltage',
      label: 'Nominal Voltage',
      dataType: 'NUMBER',
      unit: 'kV',
      isRequired: true,
      validation: { min: 0.4, max: 500 },
      category: 'System',
    },
    // Undervoltage Stage 1
    {
      name: 'uv1Pickup',
      label: 'UV Stage 1 Pickup',
      dataType: 'NUMBER',
      unit: '%',
      defaultValue: 90,
      isRequired: true,
      validation: { min: 50, max: 100 },
      category: 'Undervoltage',
    },
    {
      name: 'uv1TimeDelay',
      label: 'UV Stage 1 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 3.0,
      isRequired: true,
      validation: { min: 0, max: 60 },
      category: 'Undervoltage',
    },
    // Undervoltage Stage 2
    {
      name: 'uv2Pickup',
      label: 'UV Stage 2 Pickup',
      dataType: 'NUMBER',
      unit: '%',
      defaultValue: 70,
      isRequired: false,
      validation: { min: 30, max: 95 },
      category: 'Undervoltage',
    },
    {
      name: 'uv2TimeDelay',
      label: 'UV Stage 2 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.5,
      isRequired: false,
      validation: { min: 0, max: 60 },
      category: 'Undervoltage',
    },
    // Overvoltage Stage 1
    {
      name: 'ov1Pickup',
      label: 'OV Stage 1 Pickup',
      dataType: 'NUMBER',
      unit: '%',
      defaultValue: 110,
      isRequired: true,
      validation: { min: 100, max: 150 },
      category: 'Overvoltage',
    },
    {
      name: 'ov1TimeDelay',
      label: 'OV Stage 1 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 3.0,
      isRequired: true,
      validation: { min: 0, max: 60 },
      category: 'Overvoltage',
    },
    // Overvoltage Stage 2
    {
      name: 'ov2Pickup',
      label: 'OV Stage 2 Pickup',
      dataType: 'NUMBER',
      unit: '%',
      defaultValue: 120,
      isRequired: false,
      validation: { min: 105, max: 160 },
      category: 'Overvoltage',
    },
    {
      name: 'ov2TimeDelay',
      label: 'OV Stage 2 Time Delay',
      dataType: 'NUMBER',
      unit: 's',
      defaultValue: 0.5,
      isRequired: false,
      validation: { min: 0, max: 60 },
      category: 'Overvoltage',
    },
    // VT Settings
    {
      name: 'vtRatio',
      label: 'VT Ratio',
      dataType: 'STRING',
      isRequired: true,
      category: 'VT',
    },
    // Device
    {
      name: 'manufacturer',
      label: 'Manufacturer',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
    {
      name: 'model',
      label: 'Model',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
  ],
  standards: ['IEC 60255', 'IEEE C37.102', 'IEC 61850'],
  defaultTagPrefix: '27',
  icon: 'voltage-relay',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// BREAKER FAILURE RELAY (50BF)
// ─────────────────────────────────────────────────────────────────────────────

export const BREAKER_FAILURE_SIGNALS: StandardSignalDefinition[] = [
  {
    nameTemplate: '{TAG}_BF_INIT',
    descriptionTemplate: '{DESC} Breaker Failure Initiate',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Initiate',
  },
  {
    nameTemplate: '{TAG}_BF_TRIP',
    descriptionTemplate: '{DESC} Breaker Failure Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Trip',
  },
  {
    nameTemplate: '{TAG}_BF_RETRIP',
    descriptionTemplate: '{DESC} Breaker Re-Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Trip',
  },
  {
    nameTemplate: '{TAG}_BF_BACKUP_TRIP',
    descriptionTemplate: '{DESC} Backup Breaker Trip',
    signalType: 'DIGITAL_OUTPUT',
    direction: 'OUTPUT',
    isMandatory: true,
    category: 'Trip',
  },
  {
    nameTemplate: '{TAG}_I_DETECTOR',
    descriptionTemplate: '{DESC} Current Detector Status',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_CB_OPEN',
    descriptionTemplate: '{DESC} CB Open Auxiliary',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_BF_ACTIVE',
    descriptionTemplate: '{DESC} Breaker Failure Timer Active',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
  {
    nameTemplate: '{TAG}_IN_SERVICE',
    descriptionTemplate: '{DESC} Protection In Service',
    signalType: 'DIGITAL_INPUT',
    direction: 'INPUT',
    isMandatory: true,
    category: 'Status',
  },
];

export const BREAKER_FAILURE_TEMPLATE: BaseDeviceTemplate = {
  templateId: 'PROT-50BF-001',
  name: 'Breaker Failure Relay (50BF)',
  category: DeviceCategory.PROTECTION_RELAY,
  industries: ['POWER_TRANSMISSION', 'SUBSTATIONS_PROTECTION'],
  description: 'Breaker failure protection to trip backup breakers if primary breaker fails to clear fault.',
  standardSignals: BREAKER_FAILURE_SIGNALS,
  attributes: [
    {
      name: 'bfTimerT1',
      label: 'BF Timer T1 (Re-trip)',
      dataType: 'NUMBER',
      unit: 'ms',
      defaultValue: 150,
      isRequired: true,
      validation: { min: 50, max: 500 },
      category: 'Timing',
    },
    {
      name: 'bfTimerT2',
      label: 'BF Timer T2 (Backup Trip)',
      dataType: 'NUMBER',
      unit: 'ms',
      defaultValue: 250,
      isRequired: true,
      validation: { min: 100, max: 1000 },
      category: 'Timing',
    },
    {
      name: 'currentDetectorPickup',
      label: 'Current Detector Pickup',
      dataType: 'NUMBER',
      unit: 'A',
      defaultValue: 0.1,
      isRequired: true,
      validation: { min: 0.05, max: 1.0 },
      category: 'Settings',
    },
    {
      name: 'retrip Enabled',
      label: 'Re-Trip Enabled',
      dataType: 'BOOLEAN',
      defaultValue: true,
      isRequired: true,
      category: 'Settings',
    },
    {
      name: 'manufacturer',
      label: 'Manufacturer',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
    {
      name: 'model',
      label: 'Model',
      dataType: 'STRING',
      isRequired: false,
      category: 'Device',
    },
  ],
  standards: ['IEC 60255', 'IEEE C37.119'],
  defaultTagPrefix: '50BF',
  icon: 'breaker-failure',
  isUserDefined: false,
  version: '1.0.0',
};

// ─────────────────────────────────────────────────────────────────────────────
// EXPORT ALL SUBSTATION & PROTECTION TEMPLATES
// ─────────────────────────────────────────────────────────────────────────────

export const SUBSTATIONS_PROTECTION_TEMPLATES: BaseDeviceTemplate[] = [
  DISTANCE_RELAY_TEMPLATE,
  DIFFERENTIAL_RELAY_TEMPLATE,
  OVERCURRENT_RELAY_TEMPLATE,
  BAY_CONTROLLER_TEMPLATE,
  MERGING_UNIT_TEMPLATE,
  RTU_TEMPLATE,
  FREQUENCY_RELAY_TEMPLATE,
  VOLTAGE_RELAY_TEMPLATE,
  BREAKER_FAILURE_TEMPLATE,
];

export const SUBSTATIONS_PROTECTION_ENUMS = {
  ProtectionRelayType,
  DistanceZone,
  CharacteristicType,
  OCCurveType,
  TeleprotectionScheme,
  IEC61850Edition,
  CommunicationProtocol,
};
